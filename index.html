<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hemath ‚ù§Ô∏è Valentine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

*{margin:0;padding:0;box-sizing:border-box;}

body{
  height:100vh;
  overflow:hidden;
  background:black;
  font-family:Segoe UI,sans-serif;
  color:white;
}

/* ENVELOPE */

#letterScreen{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#300015,#000);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

.envelope{
  width:360px;
  height:230px;
  position:relative;
  cursor:pointer;
}

.envelope-body{
  width:100%;
  height:100%;
  background:linear-gradient(135deg,#ffb6d9,#ff4fa3);
  border-radius:15px;
  box-shadow:0 0 40px hotpink,0 20px 40px black;
  position:absolute;
}

.envelope-body::before{
  content:"";
  position:absolute;
  bottom:0;
  width:100%;
  height:50%;
  background:linear-gradient(135deg,#ff85c1,#ff1493);
  clip-path:polygon(0 100%,50% 0,100% 100%);
}

.envelope-flap{
  position:absolute;
  top:0;
  width:100%;
  height:55%;
  background:linear-gradient(135deg,#ff69b4,#ff1493);
  clip-path:polygon(0 0,100% 0,50% 100%);
  transform-origin:top;
  transition:1.2s;
}

.envelope-title{
  position:absolute;
  width:100%;
  top:45%;
  text-align:center;
  font-size:1.8rem;
  font-weight:bold;
  text-shadow:0 0 15px pink;
}

.envelope.open .envelope-flap{
  transform:rotateX(180deg);
}

/* MAIN */

#main{display:none;}

.slideshow{
  position:fixed;
  inset:0;
  z-index:-5;
}

.slideshow img{
  position:absolute;
  width:100%;
  height:100%;
  object-fit:contain;
  background:black;
  opacity:0;
  transition:1s;
}

.slideshow img.active{opacity:1;}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.3);
  z-index:-4;
}

/* RAIN */

#photoRain,#textRain{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:2;
}

/* Photo rain */
.rainPhoto{
  position:absolute;
  width:45px;
  height:45px;
  border-radius:6px;
  animation:fall linear forwards;
}

@keyframes fall{
  from{transform:translateY(-60px);}
  to{transform:translateY(110vh);}
}

/* Quote rain */
.rainText{
  position:absolute;
  color:pink;
  font-size:1rem;
  text-shadow:0 0 10px pink;
  animation:rise linear forwards;
}

@keyframes rise{
  from{transform:translateY(100vh);}
  to{transform:translateY(-120vh);}
}

/* Pages */

.page{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  opacity:0;
  pointer-events:none;
  transition:1s;
}

.page.active{
  opacity:1;
  pointer-events:auto;
}

.btn{
  background:pink;
  border:none;
  padding:12px 35px;
  border-radius:30px;
  cursor:pointer;
  font-size:1rem;
}

.finalVideo{
  width:80%;
  max-width:400px;
  border-radius:15px;
}

.finalText{
  max-width:750px;
  background:rgba(255,105,180,0.25);
  padding:25px;
  border-radius:15px;
  font-size:1.1rem;
  line-height:1.8;
  box-shadow:0 0 25px pink;
}

</style>
</head>

<body>

<!-- ENVELOPE -->

<div id="letterScreen">

  <div class="envelope" onclick="openEnvelope()">

    <div class="envelope-body"></div>

    <div class="envelope-title">
      Happy Valentine ‚ù§Ô∏è
    </div>

    <div class="envelope-flap"></div>

  </div>

</div>


<!-- MAIN -->

<div id="main">

<div class="slideshow">
  <img src="img1.jpg" class="active">
  <img src="img2.jpg">
  <img src="img3.jpg">
  <img src="img4.jpg">
</div>

<div class="overlay"></div>

<!-- Rain -->
<div id="photoRain"></div>
<div id="textRain"></div>

<audio id="song" loop>
  <source src="Munbe Vaa.mp3">
</audio>

<!-- Pages -->

<div class="page active" id="p1">
  <h1>My Angel ‚ù§Ô∏è</h1>
  <button class="btn" onclick="next()">Start</button>
</div>

<div class="page" id="p2">
  <h1>You Changed My Life üíñ</h1>
  <button class="btn" onclick="next()">Next</button>
</div>

<div class="page" id="p3">
  <h1>Every Moment ‚ú®</h1>
  <button class="btn" onclick="next()">Next</button>
</div>

<div class="page" id="p4">
  <h1>Forever With Me? üíç</h1>
  <button class="btn" onclick="yes()">YES ‚ù§Ô∏è</button>
</div>

<!-- FINAL -->

<div class="page" id="p5">

  <h1>My Promise üíñ</h1>

  <video class="finalVideo" autoplay muted loop>
    <source src="IMG_1204.MOV">
  </video>

  <div class="finalText" id="typing"></div>

</div>

</div>


<script>

/* MUSIC */

const song=document.getElementById("song");
let musicStarted=false;

function playMusic(){
  if(!musicStarted){
    song.play().catch(()=>{});
    musicStarted=true;
  }
}

/* ENVELOPE */

function openEnvelope(){

  document.querySelector(".envelope").classList.add("open");
  playMusic();

  setTimeout(()=>{
    document.getElementById("letterScreen").style.display="none";
    document.getElementById("main").style.display="block";
  },1600);
}

/* PAGES */

let page=1;

function changePage(n){

  document.getElementById("p"+page).classList.remove("active");

  setTimeout(()=>{
    page=n;
    document.getElementById("p"+page).classList.add("active");
  },300);
}

function next(){
  playMusic();
  changePage(page+1);
}

function yes(){
  playMusic();
  changePage(5);
  startTyping();
}

/* SLIDESHOW SPEED */

const slides=document.querySelectorAll(".slideshow img");
let index=0;

setInterval(()=>{
  slides[index].classList.remove("active");
  index=(index+1)%slides.length;
  slides[index].classList.add("active");
},1800);


/* FINAL MESSAGE */

const finalMessage = `My love ‚ù§Ô∏è

Nee en life-la vandha naal lendhu,
enna vida en life romba azhaga maariduchu.

Un sirippu paatha udaney,
en mind calm aagidum.
Un voice ketta udaney,
en heart smile pannum.

Un kooda irundha,
enakku vera edhum theva illa.
Nee mattum pothum üíñ

Naan unakku eppavum loyal-ah iruppen.
Naan unna eppavum respect pannuven.
Naan unna eppavum hurt panna maaten.

Nee sandhoshama irundha,
naan double happy.
Nee kashtama irundha,
naan un kooda nikkuren.

Life-la evlo problem vandhaalum,
naan unna vittu pogamaaten.
Because nee en life ‚ù§Ô∏è

Nee en dream.
Nee en future.
Nee en forever.

Intha world full-aa irundhaalum,
naan choose pannuva oru ponnu
nee mattum thaan üòò

I love you more than words can say üíï
En last breath varaikum,
naan unakkuthaan.

Forever yours,
Hemath üíû`;

let ci=0;
const typing=document.getElementById("typing");
const typingSpeed=28;

function startTyping(){

  typing.innerHTML="";
  ci=0;
  typeLoop();
}

function typeLoop(){

  if(ci < finalMessage.length){

    typing.innerHTML += finalMessage.charAt(ci++);
    setTimeout(typeLoop,typingSpeed);

  }

}

/* PHOTO RAIN */

const rainBox=document.getElementById("photoRain");
const rainImgs=["img1.jpg","img2.jpg","img3.jpg","img4.jpg"];

function photoRain(){

  const i=document.createElement("img");
  i.src=rainImgs[Math.floor(Math.random()*4)];
  i.className="rainPhoto";

  i.style.left=Math.random()*100+"%";
  i.style.animationDuration=3+Math.random()*3+"s";

  rainBox.appendChild(i);

  setTimeout(()=>i.remove(),7000);
}

setInterval(photoRain,250);


/* QUOTE RAIN */

const textBox=document.getElementById("textRain");

const quotes=[
  "I Love You ‚ù§Ô∏è",
  "My Life üíñ",
  "Forever üí´",
  "Always Yours üíû"
];

function textRain(){

  const t=document.createElement("div");
  t.className="rainText";

  t.innerText=quotes[Math.floor(Math.random()*quotes.length)];
  t.style.left=Math.random()*90+"%";
  t.style.animationDuration=3+Math.random()*2+"s";

  textBox.appendChild(t);

  setTimeout(()=>t.remove(),6000);
}

setInterval(textRain,1200);

</script>

</body>
</html>
